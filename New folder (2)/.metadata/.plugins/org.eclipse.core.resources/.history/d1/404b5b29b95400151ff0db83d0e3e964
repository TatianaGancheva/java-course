import java.io.BufferedWriter;
import java.io.File;
import java.io.FileWriter;

import javax.swing.JButton;
import javax.swing.JFileChooser;
import javax.swing.filechooser.FileNameExtensionFilter;

public class use {
	JButton btnExport = new JButton("Export");
	btnExport.addActionListener(new ActionListener() {
		public void actionPerformed(ActionEvent e) {
			try {
				JFileChooser fileChooser = new JFileChooser();
				fileChooser.setFileFilter(new FileNameExtensionFilter("Storage System File", "sss"));
				fileChooser.showDialog(null, "Choose...");
				
				File file = fileChooser.getSelectedFile();
				if (file == null){
					return;
				}
				String path = file.getPath();
				if (path == null){
					return;
				}
		
				path = path.endsWith(".sss") ? path : path + ".sss";
				
				FileWriter fileStream = new FileWriter(path);
				BufferedWriter writer = new BufferedWriter(fileStream);

				ArrayList<String> list = new ArrayList<String>();

		        Object table;
				int rowCount = table.getRowCount();
		        		        
		        for (int i = 0; i < rowCount; i++) {
		        		String line = String.format("%s;%s;%s;%s", table.getValueAt(i, 0),
						        								   table.getValueAt(i, 1), 
						        								   table.getValueAt(i, 2),
						        								   table.getValueAt(i, 3));
				        list.add(line);
		        }
				
				for (String line : list) {
					writer.append(line);
					writer.newLine();
				}
				
				writer.close();
				
			} catch (Exception ex) {
				JOptionPane.showMessageDialog(null, "Error while saving file!");
			}
			JOptionPane.showMessageDialog(null, "Successfully saved file!");
		}
	});

}
